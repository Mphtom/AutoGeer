<div class="container content d-flex justify-content-center mb-5">
  <div class="row mt-5">
    <div class="col-sm-4" *ngFor="let product of products">
      <div class="card m-2 py-2 px-4 mb-5">
        <div class="head d-flex justify-content-between">
          <small class="star text-light rounded-1" [ngClass]="{'bg-success': product.stock > 0, 'bg-danger': product.stock <= 0}">
            {{ product.stock > 0 ? 'IN STOCK' : 'OUT OF STOCK' }}
          </small>
          <h6 class="price text-success">&dollar;{{ product.price }}</h6>
        </div>
        <img [src]="product.thumbnail" class="card-img-top" [alt]="product.title" width="100%">
        <hr class="mt-2 mx-3">
        <div class="d-flex flex-row justify-content-center mb-3 px-3">
          <ng-container *ngIf="isTitleLong(product.title); else shortTitle">
            <h5 class="mb-0 text-nowrap text-center ">{{ product.title }}</h5>
          </ng-container>
          <ng-template #shortTitle>
            <h5 class="mb-0 text-nowrap text-center">{{ product.title }}</h5>
          </ng-template>
        </div>
        <div class="d-flex flex-row justify-content-between z">
          <small><i class="fa fa-barcode"></i> {{ product.sku }}</small>
          <small><i class="fa fa-weight-hanging"></i> {{ product.weight }}g</small>
          <small><i class="fa fa-ruler-combined"></i> {{ product.dimensions.width }}x{{ product.dimensions.height }}x{{ product.dimensions.depth }} cm</small>
        </div>
        <div class="d-flex flex-row justify-content-between px-3 pb-4 ">
          <div class="rating">
            <ng-container *ngFor="let star of [].constructor(5); let index = index">
              <i class="fa" style="font-size: 20px;" [ngClass]="index < product.rating ?(index + 0.5 < product.rating ? 'fa-star' : 'fa-solid fa-star-half-stroke'): 'fa-regular fa-star'"></i>
            </ng-container>
          </div>
        </div>
        <div class="d-flex justify-content-evenly mx-3 mt-1 mb-2">
          <button type="button" class="btn btn-primary btn-block" (click)="addToCart(product)">ADD TO CART</button>
          <button type="button" class="btn btn-outline-primary btn-block" (click)="handleData(product.id)">VIEW DETAIL</button>
        </div>
      </div>
    </div>
  </div>
</div>